uploaded_statements_out:
  type: object
  additionalProperties: False
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: stmtwownwrng
    org_id:
      $ref: './fields.yaml#/org_id'
    created_at:
      $ref: './fields.yaml#/created_at'
    updated_at:
      $ref: './fields.yaml#/updated_at'
    file_name:
      type: string
      description: |
        Specifies the name of file uploaded by the user.
      example: amex.csv
    file_size:
      type: string
      description: |
        Specifies the size of file uploaded by the user.
      example: 21KB
    no_of_debit:
      type: integer
      description: |
        Number of debit transactions in the document uploaded by the user.
      example: 3
    no_of_credit:
      type: integer
      description: |
        Number of credit transactions in the document uploaded by the user.
      example: 3
    no_of_transactions:
      type: integer
      description: |
        Number of transactions in the document uploaded by the user.
      example: 3
    statement_columns:
      type: array
      items: 
        type: string
      description: >
        This specifies headers of the statement uploaded by the user.
      example:  
        - account_number
        - amount
    statement_mapping_id:
      type: string
      description: |
        Refers to the mapping used in statement.
      example: stmpdfddfd
    start_date:
      $ref: './fields.yaml#/timestamptz_utc'
      description: |
        Start date of the statement period
    end_date:
      $ref: './fields.yaml#/timestamptz_utc'
      description: |
        End date of the statement period
    is_statement_duplicate:
      type: object
      properties:
        id:
          $ref: './fields.yaml#/id_string'
          example: stmtdfsfddf
        value:
          type: boolean
          description: |
            Determines whether the statement is duplicate or not.
    is_statement_line_items_duplicate:
      type: object
      properties:
        ids:
          type: array
          items:
            $ref: './fields.yaml#/id_string'
          example:
            - stmtge49ielgel
        value:
          type: boolean
          description: |
            Determines whether the transaction inside the statement is duplicate or not.
        duplicate_line_items:
          type: array
          items:
            $ref: './fields.yaml#/id_string'
          example:
            - stmtge49ielgel
            - stmtge49ielge3
    
  required:
    - id
    - org_id
    - created_at
    - updated_at
    - file_name
    - file_size
    - no_of_debit
    - no_of_credit
    - no_of_transactions
    - statement_columns
    - start_date
    - end_date
    - is_statement_duplicate
    - is_statement_line_items_duplicate

statements_out:
  type: object
  additionalProperties: False
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: stmtwownwrng
    org_id:
      $ref: './fields.yaml#/org_id'
    created_at:
      $ref: './fields.yaml#/created_at'
    updated_at:
      $ref: './fields.yaml#/updated_at'
    file_name:
      type: string
      description: |
        Specifies the name of file uploaded by the user.
      example: amex.csv
    file_size:
      type: string
      description: |
        Specifies the size of file uploaded by the user.
      example: 21KB
    no_of_debit:
      type: integer
      description: |
        Number of debit transactions in the document uploaded by the user.
      example: 3
    no_of_credit:
      type: integer
      description: |
        Number of credit transactions in the document uploaded by the user.
      example: 3
    no_of_transactions:
      type: integer
      description: |
        Number of transactions in the document uploaded by the user.
      example: 3
    statement_columns:
      type: array
      items: 
        type: string
      description: >
        This specifies headers of the statement uploaded by the user.
      example:  
        - account_number
        - amount
    statement_mapping_id:
      type: string
      description: |
        Refers to the mapping used in statement.
      example: stmpdfddfd
    start_date:
      $ref: './fields.yaml#/timestamptz_utc'
      description: |
        Start date of the statement period
    end_date:
      $ref: './fields.yaml#/timestamptz_utc'
      description: |
        End date of the statement period
  required:
    - id
    - org_id
    - created_at
    - updated_at
    - file_name
    - file_size
    - no_of_debit
    - no_of_credit
    - no_of_transactions
    - statement_columns
    - start_date
    - end_date
  
statements_in:
  type: object
  properties:
    file_id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: fidftadfdsdf
  required:
    - file_id

parse_in:
  type: object
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: stmtadfdsdf
    statement_mapping:
      type: object
      properties:
        transaction_dt:
          type: string
          description: |
            Specifies the mapping of transaction date on the statement.
          example: txn date
        transaction_id:
          type: string
          description: |
            Specifies the mapping of transaction id / unique id on the statement.
          example: reference number
        amount:
          type: string
          description: |
            Specifies the mapping of amount on the statement.
          example: amount
        card_number:
          type: string
          description: |
            Specifies the mapping of card number on the statement.
          example: account number
        foreign_amount:
          type: string
          description: |
            Specifies the mapping of foreign amount on the statement.
          example: foreign amount
        foreign_currency:
          type: string
          description: |
            Specifies the mapping of foreign currency on the statement.
          example: foreign currency
    meta_data:
      type: object
      properties:
        stmt_bank_name:
          type: string
          description: |
            Specifies the bank name of the statement
          example: American Express
        stmt_is_debit_positive:
          type: boolean
          description: |
            Specifies the representation of the the amount in the statement, if true then the amount represented by |
            negative sign are credits, and if false then the amount represented by negative sign are debits.
          example: true
        currency:
          type: string
          description: |
            Specifies the currency used in the statement.
          example: USD
        mapping_name:
          type: string
          description: |
            Specifies the mapping name.
          example: USD
    ignored_line_items:
      type: array
      items: 
        type: string
      description: >
        This specifies list of line items to be ignored in the statement.
      example:
        - stlisfdfadssd
  required:
    - id
    - statement_mapping
    - meta_data
    - ignored_line_items

parse_out:
  type: object
  properties:
    statement_mapping:
      type: object
      properties:
        stmt_bank_name:
          type: string
          description: |
            Specifies the bank name of the statement
          example: American Express
        vendor:
          type: string
          description: |
            Specifies the vendor of the statement
          example: Amazon
        transaction_dt:
          $ref: './fields.yaml#/timestamptz_utc'
          description: |
            Specifies the transaction date on the statement.
        stmt_is_debit_positive:
          type: boolean
          description: |
            Specifies the representation of the the amount in the statement, if true then the amount represented by |
            negative sign are credits, and if false then the amount represented by negative sign are debits.
          example: true
        amount:
          type: integer
          description: |
            Specifies the amount on the statement.
          example: 30
        card_number:
          type: string
          description: |
            Specifies the card number on the statement.
          example: xxxx-3343
        code:
          type: string
          description: |
            Specifies the unique code / transaction id on the statement.
          example: ed0b2aa913c54b3f903a5030208e1872
        foreign_amount:
          type: integer
          description: |
            Specifies the foreign amount on the statement.
          example: 48
        foreign_currency:
          type: string
          description: |
            Specifies the foreign currency on the statement.
          example: USD
  required:
    - stmt_bank_name
    - vendor
    - transaction_dt
    - stmt_is_debit_positive
    - amount
    - card_number
    - code
    - foreign_amount
    - foreign_currency

create_card_transactions:
  type: object
  properties:
    id:
      $ref: './fields.yaml#/id_string'
    start_date:
      $ref: './fields.yaml#/timestamptz_utc'
      description: |
        Start date of the statement period.
    end_date:
      $ref: './fields.yaml#/timestamptz_utc'
      description: |
        End date of the statement period.
type: object
properties:
  id:
    allOf:
      - $ref: './fields.yaml#/id_string'
    example: 'areqiwr3Wwirr'
  user_id:
    $ref: './fields.yaml#/user_id'
  user:
    $ref: './user.yaml#/user_out_embed'
  org_id:
    $ref: './fields.yaml#/org_id'
  created_at:
    $ref: './fields.yaml#/created_at'
  updated_at:
    $ref: './fields.yaml#/updated_at'
  amount:
    $ref: './fields.yaml#/amount'
  currency:
    $ref: './fields.yaml#/currency'
  advance_id:
    allOf:
      - $ref: './fields.yaml#/fk_string'
    example: 'advjrgwlk2Q'
  advance:
    $ref: './advance.yaml#/advance_out_embed'
  seq_num:
    type: string
    readOnly: true
    description: |
      This is user visible identifier for an advance request.
      This field can be used as reference in UI.
    example: 'AR/2020/10/T/95'
  notes:
    type: string
    description: |
      Optional descriptive notes which can be added to an advance request.
    example: onsite client meeting
  purpose:
    type: string
    description: |
      Descriptive purpose which is added to an advance request.
    example: onsite client meeting
  source:
    type: string
    enum:
      - WEBAPP
      - MOBILE
    description: >
      Enum value signifying the client method from which this advance_request
      was initiated.
    example: WEBAPP
  state:
    type: string
    enum:
      - DRAFT
      - APPROVAL_PENDING
      - APPROVED
      - SENT_BACK
      - PULLED_BACK
      - REJECTED
      - PAID
    description: |
      State of the advance request.
    example: PAID
  project_id:
    $ref: './fields.yaml#/fk_integer'
  project:
    $ref: './project.yaml#/project_out_embed'
  custom_fields:
    $ref: './fields.yaml#/custom_fields'
  policy_amount:
    type: number
    nullable: true
    description: |
      The expense amount set by policy.
    example: 1500
  is_policy_flagged:
    type: boolean
    description: |
      Determines whether this report was flagged from a policy
  last_approved_at:
    allOf:
      - $ref: './fields.yaml#/timestamptz_utc'
    description: |
      Signifies if and when this advance request was approved.
    nullable: True
  approvals:
    type: array
    items:
      $ref: './advance_request_approval.yaml#/advance_request_approval_out_embed'
    description: |
      List of advance request approval objects

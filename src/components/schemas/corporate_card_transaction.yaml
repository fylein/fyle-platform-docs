corporate_card_transaction_metadata:
  type: object
  nullable: true
  description: |
    Additional data that can optionally be stored. Some example details are added for reference.
  properties:
    merchant_category_code:
      $ref: './additional_detail.yaml#/string_detail'
    flight_merchant_category_code:
      $ref: './additional_detail.yaml#/string_detail'
    flight_supplier_name:
      $ref: './additional_detail.yaml#/string_detail'
    flight_travel_agency_name:
      $ref: './additional_detail.yaml#/string_detail'
    flight_ticket_number:
      $ref: './additional_detail.yaml#/string_detail'
    flight_total_fare:
      $ref: './additional_detail.yaml#/double_precision_detail'
    flight_travel_date:
      $ref: './additional_detail.yaml#/timestamp_detail'
    flight_service_class:
      $ref: './additional_detail.yaml#/string_detail'
    flight_carrier_code:
      $ref: './additional_detail.yaml#/string_detail'
    flight_fare_base_code:
      $ref: './additional_detail.yaml#/string_detail'
    flight_trip_leg_number:
      $ref: './additional_detail.yaml#/string_detail'
    hotel_merchant_category_code:
      $ref: './additional_detail.yaml#/string_detail'
    hotel_supplier_name:
      $ref: './additional_detail.yaml#/string_detail'
    hotel_checked_in_at:
      $ref: './additional_detail.yaml#/timestamp_detail'
    hotel_nights:
      $ref: './additional_detail.yaml#/integer_detail'
    hotel_checked_out_at:
      $ref: './additional_detail.yaml#/timestamp_detail'
    hotel_country:
      $ref: './additional_detail.yaml#/string_detail'
    hotel_city:
      $ref: './additional_detail.yaml#/string_detail'
    hotel_total_fare:
      $ref: './additional_detail.yaml#/double_precision_detail'
    fleet_product_merchant_category_code:
      $ref: './additional_detail.yaml#/string_detail'
    fleet_product_supplier_name:
      $ref: './additional_detail.yaml#/string_detail'
    fleet_service_merchant_category_code:
      $ref: './additional_detail.yaml#/string_detail'
    fleet_service_supplier_name:
      $ref: './additional_detail.yaml#/string_detail'
    car_rental_merchant_category_code:
      $ref: './additional_detail.yaml#/string_detail'
    car_rental_supplier_name:
      $ref: './additional_detail.yaml#/string_detail'
    car_rental_started_at:
      $ref: './additional_detail.yaml#/timestamp_detail'
    car_rental_days:
      $ref: './additional_detail.yaml#/integer_detail'
    car_rental_ended_at:
      $ref: './additional_detail.yaml#/timestamp_detail'
    general_ticket_issued_at:
      $ref: './additional_detail.yaml#/timestamp_detail'
    general_ticket_number:
      $ref: './additional_detail.yaml#/string_detail'
    general_issuing_carrier:
      $ref: './additional_detail.yaml#/string_detail'
    general_travel_agency_name:
      $ref: './additional_detail.yaml#/string_detail'
    general_travel_agency_code:
      $ref: './additional_detail.yaml#/string_detail'
    general_ticket_total_fare:
      $ref: './additional_detail.yaml#/double_precision_detail'
    general_ticket_total_tax:
      $ref: './additional_detail.yaml#/double_precision_detail'
    merchant_address:
      $ref: './additional_detail.yaml#/text_detail'

corporate_card_transaction_list_out:
  type: object
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxnwownwrng
    org_id:
      $ref: './fields.yaml#/org_id'
    user_id:
      type: string
      description: |
        The unique id of an user to whom the card transaction is assigned.
      readOnly: true
      nullable: true
      example: null
    mcc:
      type: string
      description: |
        This refers to the merchant category code for which this card transaction is made.
      $ref: './additional_detail.yaml#/string_detail'
      example: '5102'
    user:
      $ref: './user.yaml#/user_out_embed_nullable'
    created_at:
      $ref: './fields.yaml#/created_at'
    updated_at:
      $ref: './fields.yaml#/updated_at'
    amount:
      $ref: './fields.yaml#/amount'
    currency:
      $ref: './fields.yaml#/currency'
    spent_at:
      nullable: false
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies when this card transaction was made.
        This date cannot be in future.
    post_date:
      nullable: true
      allOf:
       - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies post date of a card transaction.
        This date cannot be in future.
    transaction_status:
      type: string
      enum:
        - POSTED
        - PENDING
      description: |
        Holds the status of the Corporate Card Transaction, whether posted or still pending.
    description:
      type: string
      nullable: true
      description: |
        Holds the description of the card transaction
      example: Team lunch
    statement_id:
      type: string
      nullable: true
      description: |
        If the transaction is created by statement uploaded then this key refers to the source statement.
      example: stmtdasfdsaf3
    can_delete:
      type: boolean
      nullable: true
      description: |
        Determines whether this card transaction can be deleted or not.
      example: false
    capitalone_virtual_card_last_four:
      type: string
      nullable: true
      description: |
        Last four digits of capitalone virtual card.
      example: "4521"
    foreign_currency:
      $ref: './fields.yaml#/foreign_currency'
    foreign_amount:
      $ref: './fields.yaml#/foreign_amount'
    code:
      $ref: './fields.yaml#/code'
    merchant:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the name of the vendor to which the card transaction was made.
        Note: This is not same as the merchant added in Sage Exp Mgmt but just a string
      example: Uber
    category:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the category of the card transaction
        Note: This is not same as the category added in Sage Exp Mgmt but just a string
      example: Travel
    corporate_card_id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: bawownwrng
    corporate_card:
      $ref: './corporate_card.yaml#/corporate_card_out_embed'
    assignor_user_id:
      type: string
      description: |
        The unique id of an user who assigned the card transaction.
      nullable: true
      example: uswjwgnwwgo
    assignor_user:
      $ref: './user.yaml#/user_out_embed_nullable'
    is_assigned:
      type: boolean
      description: |
        Determines whether this card transaction is assigned.
    last_assigned_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last assigned.
    is_marked_personal:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is marked as personal transaction made on the corporate card.
    last_marked_personal_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last marked personal.
    bank_transaction_number:
      type: string
      nullable: true
      description: |
        The external bank reference number provided for Amex transactions.
    is_dismissed:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is dismissed.
    last_dismissed_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last dismissed.
    is_auto_matched:
      type: boolean
      example: false
      description: |
        Signifies when this card transaction is auto_matched.
    auto_suggested_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are automatically suggested to be matched by the system
      example:
        - txwownwrng
    last_auto_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was auto matched.
    matched_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are matched to this card transaction
      example:
        - txwownwrng
    matched_expenses:
      type: array
      items:
        $ref: './expense.yaml#/matched_expense_out_embed'
    last_user_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was last matched by user.
    is_exported:
      type: boolean
      nullable: true
      description: |
        Determines whether this CCC transaction has been exported to external accounting system or not.
      example: false
    metadata:
      $ref: './corporate_card_transaction.yaml#/corporate_card_transaction_metadata'
  required:
    - id
    - org_id
    - user_id
    - user
    - created_at
    - updated_at
    - amount
    - currency
    - spent_at
    - post_date
    - description
    - statement_id
    - foreign_currency
    - foreign_amount
    - code
    - merchant
    - category
    - corporate_card_id
    - corporate_card
    - can_delete
    - assignor_user_id
    - assignor_user
    - is_assigned
    - last_assigned_at
    - is_marked_personal
    - last_marked_personal_at
    - is_dismissed
    - last_dismissed_at
    - is_auto_matched
    - auto_suggested_expense_ids
    - last_auto_matched_at
    - matched_expense_ids
    - matched_expenses
    - last_user_matched_at
    - is_exported
    - metadata

corporate_card_transaction_in:
  type: object
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxnwownwrng
    amount:
      $ref: './fields.yaml#/amount'
    currency:
      $ref: './fields.yaml#/currency'
    spent_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies when this card transaction was made.
        This date cannot be in future.
    post_date:
      nullable: true
      allOf:
       - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies post date of a card transaction.
        This date cannot be in future.
    description:
      type: string
      nullable: true
      description: |
        Holds the description of the card transaction
      example: Team lunch
    foreign_currency:
      $ref: './fields.yaml#/foreign_currency'
    foreign_amount:
      $ref: './fields.yaml#/foreign_amount'
    code:
      $ref: './fields.yaml#/code'
    merchant:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the name of the vendor to which the card transaction was made.
        Note: This is not same as the merchant added in Sage Exp Mgmt but just a string
      example: Uber
    category:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the category of the card transaction
        Note: This is not same as the category added in Sage Exp Mgmt but just a string
      example: Travel
    mcc:
      type: string
      description: |
        This refers to the merchant category code for which this card transaction is made.
      $ref: './additional_detail.yaml#/string_detail'
      example: '5102'
    corporate_card_id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: bawownwrng
    metadata:
      $ref: './corporate_card_transaction.yaml#/corporate_card_transaction_metadata'
  required:
    - amount
    - currency
    - spent_at
    - corporate_card_id

corporate_card_transaction_post_out:
  type: object
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxnwownwrng
    org_id:
      $ref: './fields.yaml#/org_id'
    user_id:
      type: string
      description: |
        The unique id of an user to whom the card transaction is assigned.
      readOnly: true
      nullable: true
      example: null
    user:
      $ref: './user.yaml#/user_out_embed_nullable'
    created_at:
      $ref: './fields.yaml#/created_at'
    updated_at:
      $ref: './fields.yaml#/updated_at'
    amount:
      $ref: './fields.yaml#/amount'
    currency:
      $ref: './fields.yaml#/currency'
    spent_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies when this card transaction was made.
        This date cannot be in future.
      nullable: false
    post_date:
      nullable: true
      allOf:
       - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies post date of a card transaction.
        This date cannot be in future.
    description:
      type: string
      nullable: true
      description: |
        Holds the description of the card transaction
      example: Team lunch
    statement_id:
      type: string
      nullable: true
      description: |
        If the transaction is created by statement uploaded then this key refers to the source statement.
      example: stmtdasfdsaf3
    can_delete:
      type: boolean
      nullable: true
      description: |
        Determines whether this card transaction can be deleted or not.
      example: false
    foreign_currency:
      $ref: './fields.yaml#/foreign_currency'
    foreign_amount:
      $ref: './fields.yaml#/foreign_amount'
    code:
      $ref: './fields.yaml#/code'
    merchant:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the name of the vendor to which the card transaction was made.
        Note: This is not same as the merchant added in Sage Exp Mgmt but just a string
      example: Uber
    mcc:
      type: string
      description: |
        This refers to the merchant category code for which this card transaction is made.
      $ref: './additional_detail.yaml#/string_detail'
      example: '5102'
    category:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the category of the card transaction
        Note: This is not same as the category added in Sage Exp Mgmt but just a string
      example: Travel
    corporate_card_id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: bawownwrng
    corporate_card:
      $ref: './corporate_card.yaml#/corporate_card_out_embed'
    assignor_user_id:
      type: string
      description: |
        The unique id of an user who assigned the card transaction.
      nullable: true
      example: null
    assignor_user:
      $ref: './user.yaml#/user_out_embed_nullable'
    is_assigned:
      type: boolean
      description: |
        Determines whether this card transaction is assigned.
      example: false
    last_assigned_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last assigned.
      example: null
    is_marked_personal:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is marked as personal transaction made on the corporate card.
    last_marked_personal_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last marked personal.
      example: null
    is_dismissed:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is dismissed.
    last_dismissed_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last dismissed.
      example: null
    is_auto_matched:
      type: boolean
      example: false
      description: |
        Signifies when this card transaction is auto_matched.
    auto_suggested_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are automatically suggested to be matched by the system
      example: []
    last_auto_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was auto matched.
      example: null
    matched_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are matched to this card transaction
      example: []
    matched_expenses:
      type: array
      items:
        $ref: './expense.yaml#/matched_expense_out_embed'
    last_user_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was last matched by user.
      example: null
    is_exported:
      type: boolean
      nullable: true
      description: |
        Determines whether this CCC transaction has been exported to external accounting system or not.
      example: false
    metadata:
      $ref: './corporate_card_transaction.yaml#/corporate_card_transaction_metadata'
  required:
    - id
    - org_id
    - user_id
    - user
    - created_at
    - updated_at
    - amount
    - currency
    - spent_at
    - post_date
    - description
    - statement_id
    - foreign_currency
    - foreign_amount
    - code
    - merchant
    - category
    - corporate_card_id
    - corporate_card
    - can_delete
    - assignor_user_id
    - assignor_user
    - is_assigned
    - last_assigned_at
    - is_marked_personal
    - last_marked_personal_at
    - is_dismissed
    - last_dismissed_at
    - is_auto_matched
    - auto_suggested_expense_ids
    - last_auto_matched_at
    - matched_expense_ids
    - matched_expenses
    - last_user_matched_at
    - is_exported
    - metadata

corporate_card_transaction_assign_in:
  type: object
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxnwownwrng
    user_id:
      type: string
      description: |
        The unique id of an user to whom the card transaction should be assigned.
      example: usge49ielgel
  required:
    - id
    - user_id

corporate_card_transaction_assign_out:
  type: object
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxnwownwrng
    org_id:
      $ref: './fields.yaml#/org_id'
    user_id:
      $ref: './fields.yaml#/user_id'
    user:
      $ref: './user.yaml#/user_out_embed'
    created_at:
      $ref: './fields.yaml#/created_at'
    updated_at:
      $ref: './fields.yaml#/updated_at'
    amount:
      $ref: './fields.yaml#/amount'
    currency:
      $ref: './fields.yaml#/currency'
    spent_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies when this card transaction was made.
        This date cannot be in future.
    post_date:
      nullable: true
      allOf:
       - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies post date of a card transaction.
        This date cannot be in future.
    description:
      type: string
      nullable: true
      description: |
        Holds the description of the card transaction
      example: Team lunch
    statement_id:
      type: string
      nullable: true
      description: |
        If the transaction is created by statement uploaded then this key refers to the source statement.
      example: stmtdasfdsaf3
    can_delete:
      type: boolean
      nullable: true
      description: |
        Determines whether this card transaction can be deleted or not.
      example: false
    foreign_currency:
      $ref: './fields.yaml#/foreign_currency'
    foreign_amount:
      $ref: './fields.yaml#/foreign_amount'
    code:
      $ref: './fields.yaml#/code'
    merchant:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the name of the vendor to which the card transaction was made.
        Note: This is not same as the merchant added in Sage Exp Mgmt but just a string
      example: Uber
    mcc:
      type: string
      description: |
        This refers to the merchant category code for which this card transaction is made.
      $ref: './additional_detail.yaml#/string_detail'
      example: '5102'
    category:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the category of the card transaction
        Note: This is not same as the category added in Sage Exp Mgmt but just a string
      example: Travel
    corporate_card_id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: bawownwrng
    corporate_card:
      $ref: './corporate_card.yaml#/corporate_card_out_embed'
    assignor_user_id:
      type: string
      description: |
        The unique id of an user who assigned the card transaction.
      nullable: true
      example: uswjwgnwwgo
    assignor_user:
      $ref: './user.yaml#/user_out_embed'
    is_assigned:
      type: boolean
      description: |
        Determines whether this card transaction is assigned.
    last_assigned_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last assigned.
    is_marked_personal:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is marked as personal transaction made on the corporate card.
    last_marked_personal_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last marked personal.
      example: null
    is_dismissed:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is dismissed.
    last_dismissed_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last dismissed.
      example: null
    is_auto_matched:
      type: boolean
      example: false
      description: |
        Signifies when this card transaction is auto_matched.
    auto_suggested_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are automatically suggested to be matched by the system
      example: []
    last_auto_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was auto matched.
      example: null
    matched_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are matched to this card transaction
      example: []
    matched_expenses:
      type: array
      items:
        $ref: './expense.yaml#/matched_expense_out_embed'
    last_user_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was last matched by user.
      example: null
    is_exported:
      type: boolean
      nullable: true
      description: |
        Determines whether this CCC transaction has been exported to external accounting system or not.
      example: false
    metadata:
      $ref: './corporate_card_transaction.yaml#/corporate_card_transaction_metadata'
  required:
    - id
    - org_id
    - user_id
    - user
    - created_at
    - updated_at
    - amount
    - currency
    - spent_at
    - post_date
    - description
    - statement_id
    - foreign_currency
    - foreign_amount
    - code
    - merchant
    - category
    - corporate_card_id
    - corporate_card
    - can_delete
    - assignor_user_id
    - assignor_user
    - is_assigned
    - last_assigned_at
    - is_marked_personal
    - last_marked_personal_at
    - is_dismissed
    - is_exported
    - last_dismissed_at
    - is_auto_matched
    - auto_suggested_expense_ids
    - last_auto_matched_at
    - matched_expense_ids
    - matched_expenses
    - last_user_matched_at
    - metadata

corporate_card_transaction_unassign_out:
  type: object
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxnwownwrng
    org_id:
      $ref: './fields.yaml#/org_id'
    user_id:
      type: string
      description: |
        The unique id of an user to which the object is associated.
      readOnly: true
      nullable: true
      example: null
    user:
      $ref: './user.yaml#/user_out_embed_nullable'
    created_at:
      $ref: './fields.yaml#/created_at'
    updated_at:
      $ref: './fields.yaml#/updated_at'
    amount:
      $ref: './fields.yaml#/amount'
    currency:
      $ref: './fields.yaml#/currency'
    spent_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies when this card transaction was made.
        This date cannot be in future.
    post_date:
      nullable: true
      allOf:
       - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies post date of a card transaction.
        This date cannot be in future.
    description:
      type: string
      nullable: true
      description: |
        Holds the description of the card transaction
      example: Team lunch
    statement_id:
      type: string
      nullable: true
      description: |
        If the transaction is created by statement uploaded then this key refers to the source statement.
      example: stmtdasfdsaf3
    can_delete:
      type: boolean
      nullable: true
      description: |
        Determines whether this card transaction can be deleted or not.
      example: false
    foreign_currency:
      $ref: './fields.yaml#/foreign_currency'
    foreign_amount:
      $ref: './fields.yaml#/foreign_amount'
    code:
      $ref: './fields.yaml#/code'
    merchant:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the name of the vendor to which the card transaction was made.
        Note: This is not same as the merchant added in Sage Exp Mgmt but just a string
      example: Uber
    mcc:
      type: string
      description: |
        This refers to the merchant category code for which this card transaction is made.
      $ref: './additional_detail.yaml#/string_detail'
      example: '5102'
    category:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the category of the card transaction
        Note: This is not same as the category added in Sage Exp Mgmt but just a string
      example: Travel
    corporate_card_id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: bawownwrng
    corporate_card:
      $ref: './corporate_card.yaml#/corporate_card_out_embed'
    assignor_user_id:
      type: string
      description: |
        The unique id of an user who assigned the card transaction.
      nullable: true
      example: null
    assignor_user:
      $ref: './user.yaml#/user_out_embed_nullable'
    is_assigned:
      type: boolean
      description: |
        Determines whether this card transaction is assigned.
      example: false
    last_assigned_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last assigned.
    is_marked_personal:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is marked as personal transaction made on the corporate card.
    last_marked_personal_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last marked personal.
      example: null
    is_dismissed:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is dismissed.
    is_exported:
      type: boolean
      nullable: true
      description: |
        Determines whether this CCC transaction has been exported to external accounting system or not.
      example: false
    last_dismissed_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last dismissed.
      example: null
    is_auto_matched:
      type: boolean
      example: false
      description: |
        Signifies when this card transaction is auto_matched.
    auto_suggested_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are automatically suggested to be matched by the system
      example: []
    last_auto_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was auto matched.
      example: null
    matched_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are matched to this card transaction
      example: []
    matched_expenses:
      type: array
      items:
        $ref: './expense.yaml#/matched_expense_out_embed'
    last_user_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was last matched by user.
      example: null
    metadata:
      $ref: './corporate_card_transaction.yaml#/corporate_card_transaction_metadata'
  required:
    - id
    - org_id
    - user_id
    - user
    - created_at
    - updated_at
    - amount
    - currency
    - spent_at
    - post_date
    - description
    - statement_id
    - foreign_currency
    - foreign_amount
    - code
    - merchant
    - category
    - corporate_card_id
    - corporate_card
    - can_delete
    - assignor_user_id
    - assignor_user
    - is_assigned
    - last_assigned_at
    - is_marked_personal
    - last_marked_personal_at
    - is_dismissed
    - last_dismissed_at
    - is_auto_matched
    - auto_suggested_expense_ids
    - last_auto_matched_at
    - matched_expense_ids
    - matched_expenses
    - last_user_matched_at
    - metadata

corporate_card_transaction_match_in:
  type: object
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxnwownwrng
    expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      example:
        - txwownwrng
  required:
    - id
    - expense_ids

corporate_card_transaction_match_out:
  type: object
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxnwownwrng
    org_id:
      $ref: './fields.yaml#/org_id'
    user_id:
      $ref: './fields.yaml#/user_id'
    user:
      $ref: './user.yaml#/user_out_embed'
    created_at:
      $ref: './fields.yaml#/created_at'
    updated_at:
      $ref: './fields.yaml#/updated_at'
    amount:
      $ref: './fields.yaml#/amount'
    currency:
      $ref: './fields.yaml#/currency'
    spent_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies when this card transaction was made.
        This date cannot be in future.
    post_date:
      nullable: true
      allOf:
       - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies post date of a card transaction.
        This date cannot be in future.
    description:
      type: string
      nullable: true
      description: |
        Holds the description of the card transaction
      example: Team lunch
    statement_id:
      type: string
      nullable: true
      description: |
        If the transaction is created by statement uploaded then this key refers to the source statement.
      example: stmtdasfdsaf3
    can_delete:
      type: boolean
      nullable: true
      description: |
        Determines whether this card transaction can be deleted or not.
      example: false
    capitalone_virtual_card_last_four:
      type: string
      nullable: true
      description: |
        Last four digits of capitalone virtual card.
      example: "4521"
    foreign_currency:
      $ref: './fields.yaml#/foreign_currency'
    foreign_amount:
      $ref: './fields.yaml#/foreign_amount'
    code:
      $ref: './fields.yaml#/code'
    merchant:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the name of the vendor to which the card transaction was made.
        Note: This is not same as the merchant added in Sage Exp Mgmt but just a string
      example: Uber
    mcc:
      type: string
      description: |
        This refers to the merchant category code for which this card transaction is made.
      $ref: './additional_detail.yaml#/string_detail'
      example: '5102'
    category:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the category of the card transaction
        Note: This is not same as the category added in Sage Exp Mgmt but just a string
      example: Travel
    corporate_card_id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: bawownwrng
    corporate_card:
      $ref: './corporate_card.yaml#/corporate_card_out_embed'
    assignor_user_id:
      type: string
      description: |
        The unique id of an user who assigned the card transaction.
      nullable: true
      example: uswjwgnwwgo
    assignor_user:
      $ref: './user.yaml#/user_out_embed'
    is_assigned:
      type: boolean
      description: |
        Determines whether this card transaction is assigned.
    last_assigned_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last assigned.
    is_marked_personal:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is marked as personal transaction made on the corporate card.
    last_marked_personal_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last marked personal.
      example: null
    is_dismissed:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is dismissed.
    last_dismissed_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last dismissed.
      example: null
    is_auto_matched:
      type: boolean
      example: false
      description: |
        Signifies when this card transaction is auto_matched.
    auto_suggested_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are automatically suggested to be matched by the system
      example: []
    last_auto_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was auto matched.
      example: null
    matched_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are matched to this card transaction
      example:
        - txwownwrng
    matched_expenses:
      type: array
      items:
        $ref: './expense.yaml#/matched_expense_out_embed'
    last_user_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was last matched by user.
    is_exported:
      type: boolean
      nullable: true
      description: |
        Determines whether this CCC transaction has been exported to external accounting system or not.
      example: false
    metadata:
      $ref: './corporate_card_transaction.yaml#/corporate_card_transaction_metadata'
  required:
    - id
    - org_id
    - user_id
    - user
    - created_at
    - updated_at
    - amount
    - currency
    - spent_at
    - post_date
    - description
    - statement_id
    - foreign_currency
    - foreign_amount
    - code
    - merchant
    - category
    - corporate_card_id
    - corporate_card
    - can_delete
    - assignor_user_id
    - assignor_user
    - is_assigned
    - last_assigned_at
    - is_marked_personal
    - last_marked_personal_at
    - is_dismissed
    - last_dismissed_at
    - is_auto_matched
    - auto_suggested_expense_ids
    - last_auto_matched_at
    - matched_expense_ids
    - matched_expenses
    - last_user_matched_at
    - metadata

corporate_card_transaction_unmatch_in:
  type: object
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxnwownwrng
    expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      example:
        - txwownwrng
  required:
    - id
    - expense_ids

corporate_card_transaction_unmatch_out:
  additionalProperties: false
  type: object
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxnwownwrng
    org_id:
      $ref: './fields.yaml#/org_id'
    user_id:
      $ref: './fields.yaml#/user_id'
    user:
      $ref: './user.yaml#/user_out_embed'
    created_at:
      $ref: './fields.yaml#/created_at'
    updated_at:
      $ref: './fields.yaml#/updated_at'
    amount:
      $ref: './fields.yaml#/amount'
    currency:
      $ref: './fields.yaml#/currency'
    spent_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies when this card transaction was made.
        This date cannot be in future.
    post_date:
      nullable: true
      allOf:
       - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies post date of a card transaction.
        This date cannot be in future.
    transaction_status:
      type: string
      enum:
        - POSTED
        - PENDING
      description: |
        Holds the status of the Corporate Card Transaction, whether posted or still pending.
    description:
      type: string
      nullable: true
      description: |
        Holds the description of the card transaction
      example: Team lunch
    statement_id:
      type: string
      nullable: true
      description: |
        If the transaction is created by statement uploaded then this key refers to the source statement.
      example: stmtdasfdsaf3
    can_delete:
      type: boolean
      nullable: true
      description: |
        Determines whether this card transaction can be deleted or not.
      example: false
    capitalone_virtual_card_last_four:
      type: string
      nullable: true
      description: |
        Last four digits of capitalone virtual card.
      example: "4521"
    foreign_currency:
      $ref: './fields.yaml#/foreign_currency'
    foreign_amount:
      $ref: './fields.yaml#/foreign_amount'
    code:
      $ref: './fields.yaml#/code'
    merchant:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the name of the vendor to which the card transaction was made.
        Note: This is not same as the merchant added in Sage Exp Mgmt but just a string
      example: Uber
    mcc:
      type: string
      description: |
        This refers to the merchant category code for which this card transaction is made.
      $ref: './additional_detail.yaml#/string_detail'
      example: '5102'
    category:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the category of the card transaction
        Note: This is not same as the category added in Sage Exp Mgmt but just a string
      example: Travel
    corporate_card_id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: bawownwrng
    corporate_card:
      $ref: './corporate_card.yaml#/corporate_card_out_embed'
    assignor_user_id:
      type: string
      description: |
        The unique id of an user who assigned the card transaction.
      nullable: true
      example: uswjwgnwwgo
    assignor_user:
      $ref: './user.yaml#/user_out_embed'
    is_assigned:
      type: boolean
      description: |
        Determines whether this card transaction is assigned.
    last_assigned_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last assigned.
    is_marked_personal:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is marked as personal transaction made on the corporate card.
    bank_transaction_number:
      type: string
      nullable: true
      description: |
        The external bank reference number provided for Amex transactions.
      example: null
    last_marked_personal_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last marked personal.
      example: null
    is_dismissed:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is dismissed.
    is_exported:
      type: boolean
      nullable: true
      description: |
        Determines whether this CCC transaction has been exported to external accounting system or not.
    last_dismissed_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last dismissed.
      example: null
    is_auto_matched:
      type: boolean
      example: false
      description: |
        Signifies when this card transaction is auto_matched.
    auto_suggested_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are automatically suggested to be matched by the system
      example: []
    last_auto_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was auto matched.
      example: null
    matched_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are matched to this card transaction
      example: []
    matched_expenses:
      type: array
      items:
        $ref: './expense.yaml#/matched_expense_out_embed'
    last_user_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was last matched by user.
    metadata:
      $ref: './corporate_card_transaction.yaml#/corporate_card_transaction_metadata'
  required:
    - id
    - org_id
    - user_id
    - user
    - created_at
    - updated_at
    - amount
    - currency
    - spent_at
    - post_date
    - description
    - statement_id
    - foreign_currency
    - foreign_amount
    - code
    - merchant
    - category
    - corporate_card_id
    - corporate_card
    - can_delete
    - assignor_user_id
    - assignor_user
    - is_assigned
    - last_assigned_at
    - is_marked_personal
    - last_marked_personal_at
    - is_dismissed
    - last_dismissed_at
    - is_auto_matched
    - auto_suggested_expense_ids
    - last_auto_matched_at
    - matched_expense_ids
    - matched_expenses
    - last_user_matched_at
    - metadata

corporate_card_transaction_id_in:
  type: object 
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxnwownwrng
  required:
    - id

corporate_card_transaction_mark_personal_out:
  type: object
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxnwownwrng
    org_id:
      $ref: './fields.yaml#/org_id'
    user_id:
      $ref: './fields.yaml#/user_id'
    user:
      $ref: './user.yaml#/user_out_embed'
    created_at:
      $ref: './fields.yaml#/created_at'
    updated_at:
      $ref: './fields.yaml#/updated_at'
    amount:
      $ref: './fields.yaml#/amount'
    currency:
      $ref: './fields.yaml#/currency'
    spent_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies when this card transaction was made.
        This date cannot be in future.
    post_date:
      nullable: true
      allOf:
       - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies post date of a card transaction.
        This date cannot be in future.
    description:
      type: string
      nullable: true
      description: |
        Holds the description of the card transaction
      example: Team lunch
    statement_id:
      type: string
      nullable: true
      description: |
        If the transaction is created by statement uploaded then this key refers to the source statement.
      example: stmtdasfdsaf3
    can_delete:
      type: boolean
      nullable: true
      description: |
        Determines whether this card transaction can be deleted or not.
      example: false
    foreign_currency:
      $ref: './fields.yaml#/foreign_currency'
    foreign_amount:
      $ref: './fields.yaml#/foreign_amount'
    code:
      $ref: './fields.yaml#/code'
    merchant:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the name of the vendor to which the card transaction was made.
        Note: This is not same as the merchant added in Sage Exp Mgmt but just a string
      example: Uber
    mcc:
      type: string
      description: |
        This refers to the merchant category code for which this card transaction is made.
      $ref: './additional_detail.yaml#/string_detail'
      example: '5102'
    category:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the category of the card transaction
        Note: This is not same as the category added in Sage Exp Mgmt but just a string
      example: Travel
    corporate_card_id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: bawownwrng
    corporate_card:
      $ref: './corporate_card.yaml#/corporate_card_out_embed'
    assignor_user_id:
      type: string
      description: |
        The unique id of an user who assigned the card transaction.
      nullable: true
      example: uswjwgnwwgo
    assignor_user:
      $ref: './user.yaml#/user_out_embed'
    is_assigned:
      type: boolean
      description: |
        Determines whether this card transaction is assigned.
    last_assigned_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last assigned.
    is_marked_personal:
      type: boolean
      example: true
      description: |
        Determines whether this card transaction is marked as personal transaction made on the corporate card.
    last_marked_personal_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last marked personal.
    is_dismissed:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is dismissed.
    last_dismissed_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last dismissed.
      example: null
    is_auto_matched:
      type: boolean
      example: false
      description: |
        Signifies when this card transaction is auto_matched.
    auto_suggested_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are automatically suggested to be matched by the system
      example: []
    last_auto_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was auto matched.
      example: null
    matched_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are matched to this card transaction
      example: []
    matched_expenses:
      type: array
      items:
        $ref: './expense.yaml#/matched_expense_out_embed'
    last_user_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was last matched by user.
      example: null
    is_exported:
      type: boolean
      nullable: true
      description: |
        Determines whether this CCC transaction has been exported to external accounting system or not.
    metadata:
      $ref: './corporate_card_transaction.yaml#/corporate_card_transaction_metadata'
  required:
    - id
    - org_id
    - user_id
    - user
    - created_at
    - updated_at
    - amount
    - currency
    - spent_at
    - post_date
    - description
    - statement_id
    - foreign_currency
    - foreign_amount
    - code
    - merchant
    - category
    - corporate_card_id
    - corporate_card
    - can_delete
    - assignor_user_id
    - assignor_user
    - is_assigned
    - last_assigned_at
    - is_marked_personal
    - last_marked_personal_at
    - is_dismissed
    - last_dismissed_at
    - is_auto_matched
    - auto_suggested_expense_ids
    - last_auto_matched_at
    - matched_expense_ids
    - matched_expenses
    - last_user_matched_at
    - metadata

corporate_card_transaction_unmark_personal_out:
  type: object
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxnwownwrng
    org_id:
      $ref: './fields.yaml#/org_id'
    user_id:
      $ref: './fields.yaml#/user_id'
    user:
      $ref: './user.yaml#/user_out_embed'
    created_at:
      $ref: './fields.yaml#/created_at'
    updated_at:
      $ref: './fields.yaml#/updated_at'
    amount:
      $ref: './fields.yaml#/amount'
    currency:
      $ref: './fields.yaml#/currency'
    spent_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies when this card transaction was made.
        This date cannot be in future.
    post_date:
      nullable: true
      allOf:
       - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies post date of a card transaction.
        This date cannot be in future.
    description:
      type: string
      nullable: true
      description: |
        Holds the description of the card transaction
      example: Team lunch
    statement_id:
      type: string
      nullable: true
      description: |
        If the transaction is created by statement uploaded then this key refers to the source statement.
      example: stmtdasfdsaf3
    can_delete:
      type: boolean
      nullable: true
      description: |
        Determines whether this card transaction can be deleted or not.
      example: false
    foreign_currency:
      $ref: './fields.yaml#/foreign_currency'
    foreign_amount:
      $ref: './fields.yaml#/foreign_amount'
    code:
      $ref: './fields.yaml#/code'
    merchant:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the name of the vendor to which the card transaction was made.
        Note: This is not same as the merchant added in Sage Exp Mgmt but just a string
      example: Uber
    mcc:
      type: string
      description: |
        This refers to the merchant category code for which this card transaction is made.
      $ref: './additional_detail.yaml#/string_detail'
      example: '5102'
    category:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the category of the card transaction
        Note: This is not same as the category added in Sage Exp Mgmt but just a string
      example: Travel
    corporate_card_id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: bawownwrng
    corporate_card:
      $ref: './corporate_card.yaml#/corporate_card_out_embed'
    assignor_user_id:
      type: string
      description: |
        The unique id of an user who assigned the card transaction.
      nullable: true
      example: uswjwgnwwgo
    assignor_user:
      $ref: './user.yaml#/user_out_embed'
    is_assigned:
      type: boolean
      description: |
        Determines whether this card transaction is assigned.
    last_assigned_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last assigned.
    is_marked_personal:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is marked as personal transaction made on the corporate card.
    last_marked_personal_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last marked personal.
    is_dismissed:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is dismissed.
    last_dismissed_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last dismissed.
      example: null
    is_auto_matched:
      type: boolean
      example: false
      description: |
        Signifies when this card transaction is auto_matched.
    auto_suggested_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are automatically suggested to be matched by the system
      example: []
    last_auto_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was auto matched.
      example: null
    matched_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are matched to this card transaction
      example: []
    matched_expenses:
      type: array
      items:
        $ref: './expense.yaml#/matched_expense_out_embed'
    last_user_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was last matched by user.
      example: null
    is_exported:
      type: boolean
      nullable: true
      description: |
        Determines whether this CCC transaction has been exported to external accounting system or not.
      example: false
    metadata:
      $ref: './corporate_card_transaction.yaml#/corporate_card_transaction_metadata'
  required:
    - id
    - org_id
    - user_id
    - user
    - created_at
    - updated_at
    - amount
    - currency
    - spent_at
    - post_date
    - description
    - statement_id
    - foreign_currency
    - foreign_amount
    - code
    - merchant
    - category
    - corporate_card_id
    - corporate_card
    - can_delete
    - assignor_user_id
    - assignor_user
    - is_assigned
    - last_assigned_at
    - is_marked_personal
    - last_marked_personal_at
    - is_dismissed
    - last_dismissed_at
    - is_auto_matched
    - auto_suggested_expense_ids
    - last_auto_matched_at
    - matched_expense_ids
    - matched_expenses
    - last_user_matched_at
    - metadata

corporate_card_transaction_ignore_out:
  type: object
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxnwownwrng
    org_id:
      $ref: './fields.yaml#/org_id'
    user_id:
      $ref: './fields.yaml#/user_id'
    user:
      $ref: './user.yaml#/user_out_embed'
    created_at:
      $ref: './fields.yaml#/created_at'
    updated_at:
      $ref: './fields.yaml#/updated_at'
    amount:
      $ref: './fields.yaml#/amount'
    currency:
      $ref: './fields.yaml#/currency'
    spent_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies when this card transaction was made.
        This date cannot be in future.
    post_date:
      nullable: true
      allOf:
       - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies post date of a card transaction.
        This date cannot be in future.
    description:
      type: string
      nullable: true
      description: |
        Holds the description of the card transaction
      example: Team lunch
    statement_id:
      type: string
      nullable: true
      description: |
        If the transaction is created by statement uploaded then this key refers to the source statement.
      example: stmtdasfdsaf3
    can_delete:
      type: boolean
      nullable: true
      description: |
        Determines whether this card transaction can be deleted or not.
      example: false
    capitalone_virtual_card_last_four:
      type: string
      nullable: true
      description: |
        Last four digits of capitalone virtual card.
      example: "4521"
    foreign_currency:
      $ref: './fields.yaml#/foreign_currency'
    foreign_amount:
      $ref: './fields.yaml#/foreign_amount'
    code:
      $ref: './fields.yaml#/code'
    merchant:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the name of the vendor to which the card transaction was made.
        Note: This is not same as the merchant added in Sage Exp Mgmt but just a string
      example: Uber
    mcc:
      type: string
      description: |
        This refers to the merchant category code for which this card transaction is made.
      $ref: './additional_detail.yaml#/string_detail'
      example: '5102'
    category:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the category of the card transaction
        Note: This is not same as the category added in Sage Exp Mgmt but just a string
      example: Travel
    corporate_card_id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: bawownwrng
    corporate_card:
      $ref: './corporate_card.yaml#/corporate_card_out_embed'
    assignor_user_id:
      type: string
      description: |
        The unique id of an user who assigned the card transaction.
      nullable: true
      example: uswjwgnwwgo
    assignor_user:
      $ref: './user.yaml#/user_out_embed'
    is_assigned:
      type: boolean
      description: |
        Determines whether this card transaction is assigned.
    last_assigned_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last assigned.
    is_marked_personal:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is marked as personal transaction made on the corporate card.
    last_marked_personal_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last marked personal.
      example: null
    is_dismissed:
      type: boolean
      example: true
      description: |
        Determines whether this card transaction is dismissed.
    last_dismissed_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last dismissed.
    is_auto_matched:
      type: boolean
      example: false
      description: |
        Signifies when this card transaction is auto_matched.
    auto_suggested_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are automatically suggested to be matched by the system
      example: []
    last_auto_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was auto matched.
      example: null
    matched_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are matched to this card transaction
      example: []
    matched_expenses:
      type: array
      items:
        $ref: './expense.yaml#/matched_expense_out_embed'
    last_user_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was last matched by user.
      example: null
    is_exported:
      type: boolean
      nullable: true
      description: |
        Determines whether this CCC transaction has been exported to external accounting system or not.
      example: false
    metadata:
      $ref: './corporate_card_transaction.yaml#/corporate_card_transaction_metadata'
  required:
    - id
    - org_id
    - user_id
    - user
    - created_at
    - updated_at
    - amount
    - currency
    - spent_at
    - post_date
    - description
    - statement_id
    - foreign_currency
    - foreign_amount
    - code
    - merchant
    - category
    - corporate_card_id
    - corporate_card
    - can_delete
    - assignor_user_id
    - assignor_user
    - is_assigned
    - last_assigned_at
    - is_marked_personal
    - last_marked_personal_at
    - is_dismissed
    - last_dismissed_at
    - is_auto_matched
    - auto_suggested_expense_ids
    - last_auto_matched_at
    - matched_expense_ids
    - matched_expenses
    - last_user_matched_at
    - metadata

corporate_card_transaction_undo_ignore_out:
  type: object
  additionalProperties: false
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxnwownwrng
    org_id:
      $ref: './fields.yaml#/org_id'
    user_id:
      $ref: './fields.yaml#/user_id'
    user:
      $ref: './user.yaml#/user_out_embed'
    created_at:
      $ref: './fields.yaml#/created_at'
    updated_at:
      $ref: './fields.yaml#/updated_at'
    amount:
      $ref: './fields.yaml#/amount'
    currency:
      $ref: './fields.yaml#/currency'
    spent_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies when this card transaction was made.
        This date cannot be in future.
    post_date:
      nullable: true
      allOf:
       - $ref: './fields.yaml#/timestamptz_utc'
      description: |
        signifies post date of a card transaction.
        This date cannot be in future.
    transaction_status:
      type: string
      enum:
        - POSTED
        - PENDING
      description: |
        Holds the status of the Corporate Card Transaction, whether posted or still pending.
    description:
      type: string
      nullable: true
      description: |
        Holds the description of the card transaction
      example: Team lunch
    statement_id:
      type: string
      nullable: true
      description: |
        If the transaction is created by statement uploaded then this key refers to the source statement.
      example: stmtdasfdsaf3
    can_delete:
      type: boolean
      nullable: true
      description: |
        Determines whether this card transaction can be deleted or not.
      example: false
    capitalone_virtual_card_last_four:
      type: string
      nullable: true
      description: |
        Last four digits of capitalone virtual card.
      example: "4521"
    foreign_currency:
      $ref: './fields.yaml#/foreign_currency'
    foreign_amount:
      $ref: './fields.yaml#/foreign_amount'
    code:
      $ref: './fields.yaml#/code'
    merchant:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the name of the vendor to which the card transaction was made.
        Note: This is not same as the merchant added in Sage Exp Mgmt but just a string
      example: Uber
    mcc:
      type: string
      description: |
        This refers to the merchant category code for which this card transaction is made.
      $ref: './additional_detail.yaml#/string_detail'
      example: '5102'
    category:
      type: string
      maxLength: 255
      nullable: true
      description: |
        String denoting the category of the card transaction
        Note: This is not same as the category added in Sage Exp Mgmt but just a string
      example: Travel
    corporate_card_id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: bawownwrng
    corporate_card:
      $ref: './corporate_card.yaml#/corporate_card_out_embed'
    assignor_user_id:
      type: string
      description: |
        The unique id of an user who assigned the card transaction.
      nullable: true
      example: uswjwgnwwgo
    assignor_user:
      $ref: './user.yaml#/user_out_embed'
    is_assigned:
      type: boolean
      description: |
        Determines whether this card transaction is assigned.
    last_assigned_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last assigned.
    is_marked_personal:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is marked as personal transaction made on the corporate card.
    last_marked_personal_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last marked personal.
      example: null
    is_dismissed:
      type: boolean
      example: false
      description: |
        Determines whether this card transaction is dismissed.
    last_dismissed_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        Signifies when this card transaction was last dismissed.
    is_auto_matched:
      type: boolean
      example: false
      description: |
        Signifies when this card transaction is auto_matched.
    auto_suggested_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are automatically suggested to be matched by the system
      example: []
    bank_transaction_number:
      type: string
      nullable: true
      description: |
        The external bank reference number provided for Amex transactions.
      example: null
    last_auto_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was auto matched.
      example: null
    matched_expense_ids:
      type: array
      items:
        $ref: './fields.yaml#/id_string'
      description: |
        Holds the expense ids which are matched to this card transaction
      example: []
    matched_expenses:
      type: array
      items:
        $ref: './expense.yaml#/matched_expense_out_embed'
    last_user_matched_at:
      allOf:
        - $ref: './fields.yaml#/timestamptz_utc'
      nullable: true
      description: |
        signifies when this expense was last matched by user.
      example: null
    is_exported:
      type: boolean
      nullable: true
      description: |
        Determines whether this CCC transaction has been exported to external accounting system or not.
      example: false
    metadata:
      $ref: './corporate_card_transaction.yaml#/corporate_card_transaction_metadata'
  required:
    - id
    - org_id
    - user_id
    - user
    - created_at
    - updated_at
    - amount
    - currency
    - spent_at
    - post_date
    - description
    - statement_id
    - foreign_currency
    - foreign_amount
    - code
    - merchant
    - category
    - corporate_card_id
    - corporate_card
    - can_delete
    - assignor_user_id
    - assignor_user
    - is_assigned
    - last_assigned_at
    - is_marked_personal
    - last_marked_personal_at
    - is_dismissed
    - is_exported
    - last_dismissed_at
    - is_auto_matched
    - auto_suggested_expense_ids
    - last_auto_matched_at
    - matched_expense_ids
    - matched_expenses
    - last_user_matched_at
    - metadata

corporate_card_transactions_stats_in:
  properties:
    query_params:
      nullable: false
      type: string
      description: |
        This field contains the query param string similar to the query params passed in corporate card transactions GET call for displaying transactions in the list view.
      example: amount=gt.0&amount=lt.1000&created_at=gt.2021-01-01T00:00:00.000Z&created_at=lt.2021-12-31T23:59:59.999Z

corporate_card_transactions_stats_out:
  type: object
  properties:
    count:
      type: integer
      nullable: false
      description: |
        This field indicates the count of corporate card transactions.
      example: 1
    debit_amount:
      allOf:
        - $ref: './fields.yaml#/amount'
      description: |
        This field indicates the sum of amount of the debit type corporate card transactions.
      example: 1239.0
    credit_amount:
      allOf:
        - $ref: './fields.yaml#/amount'
      description: |
        This field indicates the sum of amount of the credit type corporate card transactions.
      example: 101.0

corporate_card_transactions_delete_summary_in:
  type: object
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxn123453
  required:
    - id

corporate_card_transactions_delete_summary_out:
  type: object
  properties:
    delete_count:
      type: integer
      nullable: false
      description: |
        This field indicates the count of corporate card transactions that can be deleted.
      example: 1
    delete_amount:
      allOf:
        - $ref: './fields.yaml#/amount'
      description: |
        This field indicates the sum of amount of the corporate card transactions that can be deleted.
      example: 101.0

corporate_card_transactions_delete_in:
  type: object
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxn123453
  required:
    - id

corporate_card_transaction_reassign_in:
  type: object
  properties:
    id:
      allOf:
        - $ref: './fields.yaml#/id_string'
      example: btxnwownwrng
    user_id:
      type: string
      description: |
        The unique id of an user to whom the card transaction should be reassigned.
      example: usge49ielgel
  required:
    - id
    - user_id

corporate_card_transactions_expenses_stats_in:
  type: object
  properties:
    query_params:
      type: string
      description: | 
        Query param string for filtering corporate card transactions.
      nullable: false
      example: created_at=gt.2024-01-01

corporate_card_transactions_expenses_stats_out:
  type: array
  description: |
    Array containing stats objects grouped by corporate card numbers and expense state. Returns an empty array if no 
    transactions are found matching the criteria.
  items:
    type: object
    required:
      - corporate_card_id
      - card_number
      - bank_name
      - state
      - count
      - total_amount
    properties:
      corporate_card_id:
        type: string
        nullable: false
        description: |
          Id provided by Sage Exp Mgmt to corporate cards.
      card_number:
        type: string
        nullable: false
        description: |
          Masked card number (showing first 6 and last 4 digits).
        example: "411111******1111"
      bank_name:
        type: string
        nullable: false
        description: |
          Name of the bank that issued the card.
        example: "VISA_BANK"
      state:
        type: string
        nullable: false
        description: |
          State of the corporate card transactions.
        example: "COMPLETE"
      count:
        type: integer
        nullable: false
        description: |
          Number of transactions for this card number.
        example: 7
      total_amount:
        type: number
        nullable: false
        description: |
          Sum of transaction amounts for this card number.
        example: 500.86
  example:
    - state: "COMPLETE"
      id: baccRl93zzwHIK
      bank_name: "VISA_BANK"
      card_number: "411111******1111"
      count: 7
      total_amount: 500.86
    - state: "COMPLETE"
      id: baccdwz2kgUFa8
      bank_name: "MASTERCARD_BANK"
      card_number: "422222******2222"
      count: 3
      total_amount: 3209.98
    - state: "DRAFT"
      id: baccB8zAkaYnnN
      bank_name: "VISA_BANK"
      card_number: "444444******4444"
      count: 3
      total_amount: 336.81

post:
  tags:
    - Expenses
  summary: Test policy on a expense
  description: >
    It run's the organization defined policy for the expense and returns any
    violation that occurred.

    This is a test call. the results wont be stored.
  operationId: post-policy-test
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          properties:
            data:
              type: object
              properties:
                id:
                  type: string
                  maxLength: 255
                  example: txg3053jg33
                  description: >-
                    An unique string to identify the Expense. Ignore this field
                    when used as part of a POST request to create an Expense.
                employee_id:
                  type: string
                  maxLength: 255
                  description: >
                    This id provided by Fyle to uniquely identify an employee
                    within an organization.

                    This id is always prefixed with `ou`.
                  readOnly: true
                  example: outGt9ju6qP
                employee:
                  type: object
                  description: Details of the employee to whom this object belongs to.
                  readOnly: true
                  properties:
                    id:
                      type: string
                      maxLength: 255
                      description: >
                        This id provided by Fyle to identify a employee from
                        this organisation.

                        This id is always prefixed with `ou`.

                        This id is unique per organisation per email.
                      readOnly: true
                      example: ouHXboARkbAB
                    user_id:
                      type: string
                      maxLength: 255
                      description: >
                        This id helps to identify employees in other
                        organisations.

                        It is always prefixed with the string `us`.

                        It is unique per email.
                      example: usIYTLwzlaGu
                    email:
                      type: string
                      format: email
                      maxLength: 127
                      example: john.doe@example.com
                      description: >
                        An immutable field that represents the email address.

                        Must be compliant with <a
                        href="https://www.ietf.org/rfc/rfc822.txt">RFC 822.</a>
                    code:
                      type: string
                      maxLength: 255
                      example: E84122
                      description: >
                        This field refers to any string that the client programs
                        can use to refer to an employee's unique id.

                        This could be any field such as an UUID from an Active
                        Directory server or employee id in a HRMS system.
                    location:
                      type: string
                      maxLength: 255
                      example: Bangalore Ofc
                    level_id:
                      type: string
                      maxLength: 255
                      example: lvlnvJUe9k6Vx
                    department_id:
                      type: string
                      maxLength: 255
                      example: dept9in4oIHpdR
                    business_unit:
                      type: string
                      maxLength: 255
                      example: Finance ops
                      description: >-
                        Represents the business unit of the organization to
                        which of the employee belongs.
                    title:
                      type: string
                      maxLength: 255
                      example: Branch Manager
                      description: Represents the title/desgination of the employee.
                    mobile:
                      type: string
                      description: >
                        Mobile number of the employee.

                        `Given example is a fake number. We don't know who might
                        answer your call.`
                      example: +1-202-555-0167
                    joined_at:
                      type: string
                      format: date
                      example: '2018-10-31'
                      description: Date string in YYYY-MM-DD format
                    full_name:
                      type: string
                      maxLength: 255
                      example: John Doe
                      description: >-
                        Represents the full name of the employee. Must be at
                        least 3 characters.
                spent_at:
                  type: string
                  format: date-time
                  description: >
                    RFC 3339, section 5.6
                    "https://tools.ietf.org/html/rfc3339#section-5.6" compliant
                    timestamp on which the transaction for which the expense
                    [being] fyled was made. <br>

                    This date cannot be in future.
                  example: '2020-07-21T17:32:28Z'
                source:
                  type: string
                  example: SLACK_APP
                  description: >
                    The name of the client app which is creating the expense.

                    if its a thrid party app, it prefixed with TPA_.

                    Ex - If you pass SLACK_APP, it will be saved as
                    TPA_SLACK_APP. If not passed, source is saved as TPA.
                currency:
                  type: string
                  maxLength: 3
                  example: USD
                  description: >
                    ISO 4217 currency codes that are usually of three upper case
                    letters.

                    See "https://www.iban.com/currency-codes" for examples.

                    If this field is ignored during a POST call to create/update
                    an Expense, the default currency of the organization will be
                    used.

                    To use other currency than default currency use
                    `foreign_currency` field.
                amount:
                  type: number
                  description: >
                    The expense amount for which the expense was/will-be fyled.

                    The amount will be in the currency that the organization is
                    setup with in case of GET requests. <br>

                    Note that, when used as part of creating an Expense via
                    POST, the actual amount in the Expense, in a subsequent GET
                    call, may get changed either because of policies or
                    admin/approvers changing the amount.
                  example: 1500
                user_amount:
                  type: number
                  description: >
                    The expense amount as claimed by user.

                    The amount will be in the currency that the organization is
                    setup with in case of GET requests. <br>
                  example: 1984.18
                policy_amount:
                  type: number
                  description: >
                    The expense amount which is modified by policy.

                    The amount will be in the currency that the organization is
                    setup with in case of GET requests. <br>
                  example: 1500
                admin_amount:
                  type: number
                  description: >
                    The expense amount which is modified by admin or approver.

                    The amount will be in the currency that the organization is
                    setup with in case of GET requests. <br>

                    This could be null if admin or approver has not edited your
                    expense.
                  example: 0
                tax:
                  type: number
                  description: Tax amount as setup by your organisation.
                foreign_currency:
                  type: string
                  description: >
                    The three-letter currency code following ISO standard <a
                    href='https://www.iso.org/iso-4217-currency-codes.html'>ISO
                    4217</a>.

                    Original currency signifies the currency in which the object
                    (expense/advance/refund/etc.) was originally created.
                  example: INR
                foreign_amount:
                  type: number
                  description: >
                    Amount value of the object, in original currency i.e the
                    currency in which the object was initially created.
                  example: 40292.23
                creator_id:
                  type: string
                  maxLength: 255
                  description: >
                    An unique ID, generated by Fyle, for identifying the
                    Employee who created the object. Once an object is created,
                    the value of this field cannot be changed and is
                    immutable.<br>
                  example: ou12345Zdfx
                  readOnly: true
                creator:
                  allOf:
                    - type: object
                      description: Details of the employee to whom this object belongs to.
                      readOnly: true
                      properties:
                        id:
                          type: string
                          maxLength: 255
                          description: >
                            This id provided by Fyle to identify a employee from
                            this organisation.

                            This id is always prefixed with `ou`.

                            This id is unique per organisation per email.
                          readOnly: true
                          example: ouHXboARkbAB
                        user_id:
                          type: string
                          maxLength: 255
                          description: >
                            This id helps to identify employees in other
                            organisations.

                            It is always prefixed with the string `us`.

                            It is unique per email.
                          example: usIYTLwzlaGu
                        email:
                          type: string
                          format: email
                          maxLength: 127
                          example: john.doe@example.com
                          description: >
                            An immutable field that represents the email
                            address.

                            Must be compliant with <a
                            href="https://www.ietf.org/rfc/rfc822.txt">RFC
                            822.</a>
                        code:
                          type: string
                          maxLength: 255
                          example: E84122
                          description: >
                            This field refers to any string that the client
                            programs can use to refer to an employee's unique
                            id.

                            This could be any field such as an UUID from an
                            Active Directory server or employee id in a HRMS
                            system.
                        location:
                          type: string
                          maxLength: 255
                          example: Bangalore Ofc
                        level_id:
                          type: string
                          maxLength: 255
                          example: lvlnvJUe9k6Vx
                        department_id:
                          type: string
                          maxLength: 255
                          example: dept9in4oIHpdR
                        business_unit:
                          type: string
                          maxLength: 255
                          example: Finance ops
                          description: >-
                            Represents the business unit of the organization to
                            which of the employee belongs.
                        title:
                          type: string
                          maxLength: 255
                          example: Branch Manager
                          description: Represents the title/desgination of the employee.
                        mobile:
                          type: string
                          description: >
                            Mobile number of the employee.

                            `Given example is a fake number. We don't know who
                            might answer your call.`
                          example: +1-202-555-0167
                        joined_at:
                          type: string
                          format: date
                          example: '2018-10-31'
                          description: Date string in YYYY-MM-DD format
                        full_name:
                          type: string
                          maxLength: 255
                          example: John Doe
                          description: >-
                            Represents the full name of the employee. Must be at
                            least 3 characters.
                  description: |
                    Details of employee who created this expense.
                purpose:
                  type: string
                  maxLength: 1024
                  description: Justification for the expense.
                  example: Team lunch
                project_id:
                  type: string
                  description: >
                    The ID generated by Fyle to uniquely identify the Project,
                    to which the Expense belongs. <br>
                  example: '1234'
                project:
                  type: object
                  readOnly: true
                  properties:
                    id:
                      type: string
                      maxLength: 10
                      description: >
                        This id provided by Fyle to identify a project from this
                        organisation.

                        This id is a numeric string.

                        This id is unique within the organisation.
                      example: '1234'
                    name:
                      type: string
                      maxLength: 255
                      description: Represents the name of the project.
                      example: Fast and Furious
                    sub_project:
                      type: string
                      maxLength: 255
                      description: Represents the name of the sub_project.
                      example: Formula One
                    display_name:
                      type: string
                      maxLength: 513
                      description: >
                        This is a combination of name and sub_project separated
                        by a / and spaces.

                        In case if no sub_project is present it is same as name
                        of the project.
                      example: Fast and Furious / Formula One
                    code:
                      type: string
                      maxLength: 255
                      description: |
                        This represents the code of project.
                      example: FF-032
                cost_center_id:
                  type: string
                  description: >
                    The ID generated by Fyle to uniquely identify the
                    CostCenter, to which the Expense belongs. <br>
                  example: '4321'
                cost_center:
                  type: object
                  readOnly: true
                  properties:
                    id:
                      type: string
                      example: '4321'
                    name:
                      type: string
                      maxLength: 255
                      example: sales & marketing
                    code:
                      type: string
                      example: sm-cc
                category_id:
                  type: integer
                  description: >
                    The unique ID of a Category to which the Expense belongs.
                    <br>

                    Use `GET /fyler/categories` to get the list of valid ID and
                    Name of the Categories for the organization.
                  example: 2391
                category:
                  type: object
                  readOnly: true
                  properties:
                    id:
                      type: integer
                      maxLength: 10
                      example: 2391
                      description: >
                        This id provided by Fyle to identify a category from
                        this organisation.

                        This id is a numeric.

                        This id is unique within the organisation.
                    name:
                      type: string
                      maxLength: 255
                      example: Engine
                      description: Represents the name of the category.
                    sub_category:
                      type: string
                      maxLength: 255
                      example: Turbo charged
                      description: Represents the name of the sub_category.
                    display_name:
                      type: string
                      maxLength: 255
                      example: Engine / Turbo charged
                      description: >
                        This is a combination of name and sub_category separated
                        by a / and spaces.

                        In case if no sub_category is present it is same as name
                        of the category.
                    system_category:
                      type: string
                      maxLength: 255
                      example: Others
                      description: Represents the name of the system_category.
                state:
                  type: string
                  enum:
                    - COMPLETE
                    - DRAFT
                    - PAID
                    - PAYMENT_PROCESSING
                    - APPROVER_PENDING
                    - PAYMENT_PENDING
                    - APPROVED
                  description: The state of the Expense.
                source_account_id:
                  type: string
                source_account:
                  type: object
                  readOnly: true
                  properties:
                    id:
                      type: string
                      example: acct0vTfdNQrT
                    type:
                      type: string
                      enum:
                        - PERSONAL_ACCOUNT
                        - PERSONAL_ADVANCE_ACCOUNT
                        - PERSONAL_CORPORATE_CREDIT_CARD_ACCOUNT
                        - COMPANY_EXPENSE_ACCOUNT
                        - COMPANY_ADVANCE_ACCOUNT
                        - COMPANY_CORPORATE_CREDIT_CARD_ACCOUNT
                        - COMPANY_CATEGORY_ACCOUNT
                      example: PERSONAL_ACCOUNT
                invoice_number:
                  type: string
                  description: |
                    invoice number from the receipt.
                billable:
                  type: boolean
                  example: true
                  description: This fields marks whether a given expense is billable a not.
                reimbursable:
                  type: boolean
                  example: true
                created_at:
                  type: string
                  format: date-time
                  description: >
                    <a
                    href='https://tools.ietf.org/html/rfc3339#section-5.6'>RFC
                    3339, section 5.6 compliant timestamp.</a>

                    Signifies when this object was created.
                  readOnly: true
                  example: '2020-06-01T13:14:54.804Z'
                updated_at:
                  type: string
                  format: date-time
                  description: >
                    <a
                    href='https://tools.ietf.org/html/rfc3339#section-5.6'>RFC
                    3339, section 5.6 compliant timestamp.</a>

                    Signifies when this object was updated.
                  readOnly: true
                  example: '2020-06-11T13:14:55.201598Z'
                expense_number:
                  type: string
                  description: |
                    This is user visible identifier for an expense.
                    This field can be used as reference in UI.
                  example: E/2020/10/T/95
                exchange_rate:
                  type: number
                  description: >
                    This field determines at which rate the expenses from
                    foriegn currency was converted to home currency.
                report_id:
                  type: string
                  description: |
                    Unique id given by Fyle to identify an Expense Report.
                reported_at:
                  type: string
                  format: date-time
                  description: >
                    RFC 3339, section 5.6
                    "https://tools.ietf.org/html/rfc3339#section-5.6" compliant
                    timestamp on which the Expense was submitted via a Report to
                    the Approvers.

                    If the Expense is not added to a Report yet or if the Report
                    is not yet submitted, this could be null.
                report:
                  type: object
                  readOnly: true
                  properties:
                    id:
                      type: string
                      maxLength: 255
                      description: |
                        This id helps to identify reports in an organisations.
                        It is always prefixed with the string `rp`.
                        It is unique per report.
                      example: rpIYTLwzlaGu
                    purpose:
                      type: string
                    approved_at:
                      type: string
                      format: date-time
                      description: >
                        RFC 3339, section 5.6
                        "https://tools.ietf.org/html/rfc3339#section-5.6"
                        compliant timestamp on which the Report was approved.

                        This field could be null if the Report was not yet
                        approved.
                      example: '2020-07-23T09:32:00.933Z'
                    reimbursed_at:
                      type: string
                      format: date-time
                      description: >
                        RFC 3339, section 5.6
                        "https://tools.ietf.org/html/rfc3339#section-5.6"
                        compliant timestamp on which the Expense was Reimbursed.

                        If the Expense is not reimbursed yet, this could be
                        null. <br>
                      example: '2020-07-28T09:32:00.933Z'
                    claim_number:
                      type: string
                      maxLength: 255
                    settlement_id:
                      type: string
                      maxLength: 255
                      description: >
                        An unique ID, generated by Fyle, for identifying the
                        Settlement.

                        Once a Report is paid, the value of this field cannot be
                        changed and is immutable. <br>
                      example: setzS7mbPKPWg
                    settled_at:
                      type: string
                      format: date-time
                      description: >
                        RFC 3339, section 5.6
                        "https://tools.ietf.org/html/rfc3339#section-5.6"
                        compliant timestamp on which the report approved was
                        settled. <br>
                      example: '2020-07-23T09:32:00.933Z'
                    trip_request_id:
                      type: string
                      description: An ID of the TripRequest associated with it
                physical_bill:
                  type: boolean
                  description: >
                    This field indicated whether physical bill was received or
                    not.
                  example: true
                physical_bill_at:
                  type: string
                  format: date-time
                  description: >
                    RFC 3339, section 5.6
                    "https://tools.ietf.org/html/rfc3339#section-5.6" compliant
                    timestamp indicating when the Expense's physical bill was
                    submitted.

                    If the Expense's bill is not required to be submitted, then
                    this could be null.
                is_verified:
                  type: boolean
                  description: |
                    Indicates whether the Expense is verified or not
                verified_at:
                  type: string
                  format: date-time
                  description: >
                    RFC 3339, section 5.6
                    "https://tools.ietf.org/html/rfc3339#section-5.6" compliant
                    timestamp on which the Expense was verified.

                    If the Expense is not verified yet, this could be null. <br>
                vendor:
                  type: string
                  example: Uber
                  maxLength: 255
                  description: >
                    String denoting the name of the vendor to which the Expense
                    was made
                vendor_id:
                  type: string
                  example: 24242r
                  maxLength: 255
                  description: >
                    String denoting the id of the vendor to which the Expense
                    was made
                locations:
                  description: >
                    This field will be present for travel related categories. To
                    add to and from location to you travel category related
                    expenses add two locations in schema given below.
                  type: array
                  items:
                    type: object
                    properties:
                      city:
                        type: string
                        example: London
                      state:
                        type: string
                        example: London
                      display_name:
                        type: string
                      country:
                        type: string
                        example: United Kingdom
                      formatted_address:
                        type: string
                        example: '221 Baker St, Marylebone, London, United Kingdom'
                      latitude:
                        type: number
                        example: 12.971599
                      longitude:
                        type: number
                        example: 77.594566
                started_at:
                  description: >
                    This field is only relevant for travel related categories.
                    This represents the onward date.
                  type: string
                  example: '2019-07-17T00:00:00.000Z'
                ended_at:
                  description: >
                    This field is only relevant for travel related categories.
                    This represents the return date.
                  type: string
                  example: '2019-07-27T00:00:00.000Z'
                mileage_distance:
                  type: number
                  description: Actual distance travelled by employee in mileage expenses.
                mileage_calculated_distance:
                  type: number
                  description: Distance compluted by Fyle in mileage expenses.
                mileage_distance_unit:
                  type: string
                  enum:
                    - KM
                    - MILES
                mileage_calculated_amount:
                  type: number
                  description: Amount compluted by Fyle in mileage expenses.
                mileage_vehicle_type:
                  type: string
                  description: Type of vehicle used for travel.
                mileage_rate:
                  type: number
                  description: Rate per km as provided in the Fyle system
                mileage_is_round_trip:
                  type: boolean
                  description: Flag stating whether this was a round trip or not.
                bus_travel_class:
                  description: |
                    This field is applicable only for bus category.
                  type: string
                  example: AC
                train_travel_class:
                  description: |
                    This field is applicable for only Train category.
                  type: string
                  example: string
                flight_journey_travel_class:
                  description: >
                    This field is applicable only for flight category. Can be
                    `BUSINESS`, `ECONOMY`, `FIRST_CLASS`
                  type: string
                  example: ECONOMY
                flight_return_travel_class:
                  description: >
                    This field is applicable only for flight category. Can be
                    `BUSINESS`, `ECONOMY`, `FIRST_CLASS`
                  type: string
                  example: BUSINESS
                hotel_is_breakfast_provided:
                  type: boolean
                  description: >
                    In case of `Hotel` related expenses, this field indicates
                    whether a breakfast was provided by the hotel or not.
                per_diem_rate_id:
                  type: string
                per_diem_rate:
                  type: object
                  readOnly: true
                  properties:
                    id:
                      type: string
                      example: '1104'
                    name:
                      type: string
                      maxLength: 255
                      example: sales & marketing
                    currency:
                      type: string
                      maxLength: 3
                      example: USD
                    rate:
                      type: integer
                      example: 40
                num_days:
                  type: integer
                  example: 2
                has_attachments:
                  type: boolean
                  description: >
                    Returns if there are file attachments that the Expense has.
                    Usually the image of the receipts are added as attachments
                    to the Expenses.
                attachments:
                  description: |
                    returns reference to files API.
                  type: array
                  items:
                    type: object
                    readOnly: true
                    properties:
                      id:
                        type: string
                        description: |
                          Id of the file object. Always starts with `fi`.
                        example: figo4lgkn2224
                      name:
                        type: string
                        description: |
                          Name of the uploaded file.
                        example: uber_expenses_vmrpw.pdf
                      type:
                        type: string
                        enum:
                          - THUMBNAILx200x200
                          - ORIGINAL
                          - ENCRYPTED
                        description: >
                          Indicates whether this file original size or encrypted
                          or its thumbnail image.
                        example: ORIGINAL
                      password:
                        type: string
                        description: |
                          Password which required to unlock the file.
                        example: SuperSecretPassword
                      download_path:
                        type: string
                        description: |
                          Link to download this file.
                          change this to right url later.
                        example: /api/files/fiGxWO1vdkW8/download
                custom_properties:
                  type: array
                  items:
                    type: object
                    properties:
                      name:
                        type: string
                        description: |
                          Name of the custom property.
                      value:
                        oneOf:
                          - type: string
                          - type: boolean
                          - type: integer
                          - type: object
                            properties:
                              city:
                                type: string
                                example: London
                              state:
                                type: string
                                example: London
                              display_name:
                                type: string
                              country:
                                type: string
                                example: United Kingdom
                              formatted_address:
                                type: string
                                example: >-
                                  221 Baker St, Marylebone, London, United
                                  Kingdom
                              latitude:
                                type: number
                                example: 12.971599
                              longitude:
                                type: number
                                example: 77.594566
                          - type: array
                            items:
                              type: string
                        description: >
                          The value for the custom properties. This could be a
                          String, Boolean, Integer or an Array of Strings. <br>
                    example:
                      house: gryffindor
                is_policy_flagged:
                  type: boolean
                  description: >-
                    This field indicates whether policy execution has flagged
                    this expenses or not.
                  example: false
                is_manual_flagged:
                  type: boolean
                  description: >
                    This field indicates whether this expenses was manually
                    flagged by approver or finance or admin.
                  example: true
                policy_state:
                  type: string
                  enum:
                    - FAILED
                    - SUCCESS
                    - RUNNING
                  description: >
                    This fields shows policy execution state for this expenses.

                    If this field is null then its policy has not yet run on
                    this expenses.
                extracted_data:
                  type: object
                transcribed_data:
                  type: object
                is_user_review_needed:
                  type: boolean
                is_mandatory_fields_present:
                  type: boolean
                is_receipt_required:
                  type: boolean
                is_holiday_expense:
                  type: boolean
                risk_state:
                  type: string
                  enum:
                    - HIGH_RISK
                    - MODERATE_RISK
                    - NO_RISK
                  example: NO_RISK
                external_id:
                  type: string
                  description: >
                    Id given by external systems like Gmail. To identify whether
                    that entity has been already added to Fyle or not.
                split_group_id:
                  type: string
                split_group_user_amount:
                  type: number
                personal_card_transaction:
                  type: object
                  description: >
                    This key contains details about personal card transaction
                    linked to this expense.
                corporate_credit_card_transaction:
                  type: object
                  description: >
                    This key contains details about corporate card transaction
                    linked to this expense.
                expense_approvals:
                  type: array
                  items:
                    type: object
                    description: |
                      siginifies all the approvals of a particular object.
                    properties:
                      approver_id:
                        type: string
                      state:
                        type: string
                        enum:
                          - APPROVED
                          - APPROVAL_PENDING
                          - APPROVAL_DISABLED
                    example:
                      approver_id: oueoblnegf
                      state: APPROVED
                  example:
                    - approver_id: ougelgneget
                      state: APPROVED
                    - approver_id: ougo3nlwfgg
                      state: APPROVAL_PENDING
                last_updater_id:
                  type: string
                  description: |
                    This represents the id of employee who updated this expense.
                  example: ouGgsdfdq
                last_updater:
                  allOf:
                    - type: object
                      description: Details of the employee to whom this object belongs to.
                      readOnly: true
                      properties:
                        id:
                          type: string
                          maxLength: 255
                          description: >
                            This id provided by Fyle to identify a employee from
                            this organisation.

                            This id is always prefixed with `ou`.

                            This id is unique per organisation per email.
                          readOnly: true
                          example: ouHXboARkbAB
                        user_id:
                          type: string
                          maxLength: 255
                          description: >
                            This id helps to identify employees in other
                            organisations.

                            It is always prefixed with the string `us`.

                            It is unique per email.
                          example: usIYTLwzlaGu
                        email:
                          type: string
                          format: email
                          maxLength: 127
                          example: john.doe@example.com
                          description: >
                            An immutable field that represents the email
                            address.

                            Must be compliant with <a
                            href="https://www.ietf.org/rfc/rfc822.txt">RFC
                            822.</a>
                        code:
                          type: string
                          maxLength: 255
                          example: E84122
                          description: >
                            This field refers to any string that the client
                            programs can use to refer to an employee's unique
                            id.

                            This could be any field such as an UUID from an
                            Active Directory server or employee id in a HRMS
                            system.
                        location:
                          type: string
                          maxLength: 255
                          example: Bangalore Ofc
                        level_id:
                          type: string
                          maxLength: 255
                          example: lvlnvJUe9k6Vx
                        department_id:
                          type: string
                          maxLength: 255
                          example: dept9in4oIHpdR
                        business_unit:
                          type: string
                          maxLength: 255
                          example: Finance ops
                          description: >-
                            Represents the business unit of the organization to
                            which of the employee belongs.
                        title:
                          type: string
                          maxLength: 255
                          example: Branch Manager
                          description: Represents the title/desgination of the employee.
                        mobile:
                          type: string
                          description: >
                            Mobile number of the employee.

                            `Given example is a fake number. We don't know who
                            might answer your call.`
                          example: +1-202-555-0167
                        joined_at:
                          type: string
                          format: date
                          example: '2018-10-31'
                          description: Date string in YYYY-MM-DD format
                        full_name:
                          type: string
                          maxLength: 255
                          example: John Doe
                          description: >-
                            Represents the full name of the employee. Must be at
                            least 3 characters.
                  description: |
                    Details of employee who updated this expense.
                org_id:
                  type: string
                  readOnly: true
                  description: >
                    The unique id of the Organization to which the object is
                    associated.
                  example: orwruogwnngg
                actions:
                  type: object
                  readOnly: true
                  properties:
                    can_delete:
                      type: boolean
                      example: false
                    can_edit:
                      type: boolean
                      example: true
                    can_edit_physical_bill:
                      type: boolean
                      example: true
                    can_remove_from_report:
                      type: boolean
                      example: false
          required:
            - data
  responses:
    '200':
      description: OK
      content:
        application/json:
          schema:
            type: object
            properties:
              url:
                type: string
                example: /fyler/policy_test
              data:
                type: object
                properties:
                  expense_desired_state:
                    type: object
                    properties:
                      action_description:
                        type: string
                        maxLength: 255
                        description: |
                          Describes the what action will taken on the expense.
                        example: >-
                          The following action(s) will be taken- expense
                          violation will be marked, expense amount will be
                          changed to 0 USD
                      currency:
                        type: string
                        maxLength: 3
                        description: >
                          The three-letter currency code following ISO standard
                          <a
                          href='https://www.iso.org/iso-4217-currency-codes.html'>ISO
                          4217</a>
                        example: USD
                      disable_system_approvers:
                        type: boolean
                        default: false
                        example: false
                      failure_reason:
                        type: string
                        description: |
                          Contains the failure reasons.
                      is_flagged:
                        type: boolean
                        description: |
                          Indicates whether expense is flagged or not.
                        default: false
                        example: false
                      policy_amount:
                        type: number
                        example: 10
                      policy_approver_ids:
                        type: array
                        description: |
                          Contains list of approver ids.
                        items:
                          type: string
                        example:
                          - apd829d92j9w
                      policy_rule_descriptions:
                        type: array
                        description: |
                          Contains the list of policy rules description.
                        items:
                          type: string
                        example:
                          - This is rule 1
                          - This is the rule 2
                      policy_run_status:
                        type: string
                        description: >
                          Indicates the status of policy execution, whether it
                          got executed or not.
                        example: SUCCESS
                      is_receipt_required:
                        type: boolean
                        description: >
                          Indicates whether receipt is mandatory or not in this
                          policy.
                        example: true
                      expense_id:
                        type: string
                        description: |
                          Expense Id on which this policy executed.
                        example: txu89h890i8
                  expense_policy_rule_desired_states:
                    type: array
                    items:
                      type: object
                      properties:
                        currency:
                          type: string
                          maxLength: 3
                          description: >
                            The three-letter currency code following ISO
                            standard <a
                            href='https://www.iso.org/iso-4217-currency-codes.html'>ISO
                            4217</a>
                          example: USD
                        description:
                          type: string
                          description: |
                            Description of this policy rule.
                          example: Receipt needed for expenses above USD 74
                        disable_system_approvers:
                          type: boolean
                          description: >
                            Indicates whether to disable system approvers or
                            not.
                          example: false
                        flag:
                          type: boolean
                          description: |
                            Indicates whether expense is flagged or not.
                          example: false
                        missing_approvers:
                          type: array
                          description: >
                            Contains the missing ids of Approver set for this
                            Fyler.
                          items:
                            type: string
                          example:
                            - oudh2ue92ue3
                            - oue29iwk2p334
                        policy_amount:
                          type: number
                          description: |
                            Amount capping set in the policy.
                          example: 100
                        policy_approver_ids:
                          type: array
                          description: |
                            Contains the ids of Approver set for this Fyler.
                          items:
                            type: string
                          example:
                            - oudh2w4ue92u
                            - ouvnre29iwk2p
                        popup:
                          type: boolean
                          description: >
                            Indicates whether the message is shown in popup
                            window or not.
                          example: false
                        receipt_required:
                          type: boolean
                          description: >
                            Indicates whether receipt is mandatory or not in
                            this policy rule.
                          example: false
                        expense_id:
                          type: string
                          description: |
                            Expense Id on which this policy executed.
                          example: txu89h890i8
                        expense_policy_rule_id:
                          type: string
                          description: |
                            Expense policy rule id.
                          example: tprLjFqDpdjj20
                  expense_query_params:
                    type: array
                    description: |
                      Query params present in expense
                    items:
                      type: string
    '400':
      description: Bad request
      content:
        application/json:
          schema:
            oneOf:
              - type: array
                items:
                  type: object
                  properties:
                    row:
                      type: integer
                      description: |
                        This holds the info of which row contains bad data.
                    key:
                      type: string
                      description: |
                        This helps in identifying the error by unique key.
                    message:
                      type: string
                      description: >
                        This explains what the error is in `human readable`
                        text.
                example:
                  - row: 1
                    key: Amount abcd
                    message: Invalid amount
              - type: object
                properties:
                  message:
                    enum:
                      - Unable to process JSON
                    type: string
                    description: >
                      This error means that incoming json is not in right
                      format.
                  code:
                    type: integer
                    default: 400
                    example: 400
                    deprecated: true
    '401':
      description: Unauthorized request
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                enum:
                  - invalid token
                type: string
                description: >
                  This error means that the input access token is either not
                  issued by Fyle or has expired.

                  You need to generate a new access token.
    '403':
      description: Forbidden
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                enum:
                  - Forbidden
                type: string
                description: >
                  This error means current user does not have enough permissions
                  to perform this operation.
